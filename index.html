<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <!-- CHART.JS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>   
    
    <!-- STYLES FOR CENTERING-->
    <style>
        body {
          background-color:rgb(200,200,200);
        }
        .outer-container {
        position : absolute;
        display: table;
        width: 100%;
        height: 100%;
        }
        .inner-container {
        display: table-cell;
        vertical-align: middle;
        text-align: center;
        }
      </style>

    <title>Corona CB</title>	
  </head>
  <body>
    <!-- HEADER -->
    <nav class="navbar fixed-top navbar-dark bg-dark justify-content-center">
    <img src="https://raw.githubusercontent.com/stewahn/corona-screen/main/help_grey233.svg" alt="" style="padding-right: 10px"><a style="color:rgb(233,233,233)" href="https://www.cottbus.de/verwaltung/gb_iii/gesundheit/corona/index.html">Corona Screen Cottbus</a>
    </nav>
    <!-- FOOTER BUTTON FOR MODAL -->
    <nav class="navbar fixed-bottom navbar-dark bg-dark justify-content-center">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" style="color:rgb(233,233,233); background-color:rgb(100,100,100); border: 0px;">
            Quelle - Hinweise - Impressum &#169; 2020 
          </button>    
    </nav>
    <!-- MODAL -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Corona Screen Cottbus</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <h6>Quellenvermerk:</h6>
                <p>Robert Koch-Institut (RKI), dl-de/by-2-0 und Stadt Cottbus</p><br>
                
                <h6>Datendownload:</h6>
                <p><a>1.)&nbsp;</a><a href="https://www.rki.de/DE/Content/InfAZ/N/Neuartiges_Coronavirus/Daten/Fallzahlen_Kum_Tab.html">Robert Koch-Institut</a></p>
                <p>2.) Download: Fallzahlen_Kum_Tab.xlsx</p>
                <p>3.) Excel: Fallzahlen_Kum_Tab BL_7-Tage-Fallzahlen</p>
                <p><a>4.)&nbsp;</a><a href="https://www.cottbus.de/verwaltung/gb_iii/gesundheit/corona/index.html">Corona-Lage auf cottbus.de</a></p><br>
                
                <h6>Hinweise:</h6>
                <p>Ein Pluszeichen gibt die Veränderung zum Vortag an.</p>
                <p>Die Fallzahlen aus Cottbus werden momentan täglich manuell übernommen von der Internetseite (siehe Punkt 4 bei Datendownload).</p>
                <p>Die Balkendiagramme zeigen monatlich die Anzahl der am Stichtag (jeweils der 6.) aktuell infizierten Personen. Am 6.5.2020 beginnt der Datensatz des RKI.</p><br>
                
                <h6>Impressum:</h6><p>St. Stöhr - stefan.stoehr@cottbus.de</p>
                <p>21. Dezember 2020, 9:42 Uhr</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    <!-- CENTERING CONTAINER -->
    <div class="outer-container">
    <div class="inner-container">
    <div class="container mt-5">
    <div class="row justify-content-center">
    <!-- UPDATE -->
		<div class="col-auto mb-3">
            <div class="card" style="width: 18rem; height: 6rem; background-color: rgb(233,233,233);">
                <div class="card-body">
					        <h6 class="card-subtitle mb-2 text-muted">Update</h6>
					        <h5 class="card-title"><a>21.12.2020</a></h5>
                </div>
            </div>
        </div>
    <!-- INZIDENZ -->
		<div class="col-auto mb-3">
            <div class="card" style="width: 18rem; height: 6rem;background-color: rgb(233,233,233);">
                <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">7-Tage-Inzidenz</h6>
					          <h5 class="card-title"><a id="countup">408</a><a style="color:rgb(250,0,0);font-size: 0.7em; padding-left: 10px;">+</a><a style="color:rgb(250,0,0);font-size: 0.7em">19</a></h5>
                </div>
            </div>
        </div>
    <!-- INFEKTIONEN -->    
		<div class="col-auto mb-3">
            <div class="card" style="width: 18rem; height: 6rem;background-color: rgb(233,233,233);">
                <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">Aktuell infiziert</h6>
					          <h5 class="card-title"><a id="countup">1</a><a>.</a><a id="countup">099</a><a style="color:rgb(25, 150, 0);font-size: 0.7em; padding-left: 10px;">-</a><a id="countup" style="color:rgb(25,150,0);font-size: 0.7em;">112</a></h5>
                </div>
            </div>
        </div>
    <!-- GENESENE -->    
    <div class="col-auto mb-3">
            <div class="card" style="width: 18rem; height: 6rem;background-color: rgb(233,233,233);">
                <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">Genesene</h6>
                    <h5 class="card-title"><a id="countup">1</a><a>.</a><a id="countup">000</a><a style="color:rgb(25, 150, 0);font-size: 0.7em; padding-left: 10px;">+</a><a id="countup" style="color:rgb(25,150,0);font-size: 0.7em;">149</a></h5>
                </div>
            </div>
        </div>
    <!-- VERSTORBENE -->    
    <div class="col-auto mb-3">
            <div class="card" style="width: 18rem; height: 6rem;background-color: rgb(233,233,233);">
                <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">Verstorbene</h6>
					          <h5 class="card-title"><a id="countup">65</a></h5>
                </div>
            </div>
        </div>
    <!-- QUARANTÄNE -->
    <div class="col-auto mb-3">
            <div class="card" style="width: 18rem; height: 6rem;background-color: rgb(233,233,233);">
                <div class="card-body">
                    <h6 class="card-subtitle mb-2 text-muted">Quarant&auml;ne</h6>
                    <h5 class="card-title"><a id="countup">3</a><a>.</a><a id="countup">788</a><a style="color:rgb(25, 150, 0);font-size: 0.7em; padding-left: 10px;">-</a><a id="countup" style="color:rgb(25,150,0);font-size: 0.7em;">2</a></h5>
                </div>
            </div>
        </div>
    <!-- CHART 1 = INFEKTIONSVERLAUF CB-->
		<div class="col-auto mb-3">
            <div class="card" style="width: 18rem; height: 10rem;background-color: rgb(233,233,233);">
                <div class="card-body">
                    <canvas id="chart1"></canvas>
                </div>
            </div>
        </div>
    <!-- CHART 2 = INFIZIERTE NACH ALTER-->
    <div class="col-auto mb-3">
            <div class="card" style="width: 18rem; height: 10rem;background-color: rgb(233,233,233);">
                <div class="card-body">
                    <canvas id="chart2"></canvas>
                </div>
            </div>
        </div>
    <!-- CHART 3 = VERSTORBENE NACH ALTER -->
    <div class="col-auto mb-3">
            <div class="card" style="width: 18rem; height: 10rem;background-color: rgb(233,233,233);">
                <div class="card-body">
                    <canvas id="chart3"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>
<!-- JAVASCRIPT START -->
<script>
// CHART 1 - LINECHART INFEKTIONSVERLAUF
new Chart(document.getElementById("chart1"), {
    type: 'bar',
    data: {
      labels: ["M", "J", "J", "A", "S", "O", "N", "D"],
      datasets: [
        {
          backgroundColor: ["rgb(250,0,0)", "rgb(250,0,0)","rgb(250,0,0)","rgb(250,0,0)", "rgb(250,0,0)", "rgb(250,0,0)","rgb(250,0,0)","rgb(250,0,0)"],
          data: [125,18,30,36,49,185,1489,2833]
        }
      ]
    },
    options: {
      legend: { display: false },
      title: {
        display: true,
        text: 'Infektionsverlauf in Brandenburg'
      }
    }
});
// CHART 2 - BARCHART INFIZIERT NACH ALTER
new Chart(document.getElementById("chart2"), {
    type: 'bar',
    data: {
      labels: ["M", "J", "J", "A", "S", "O", "N", "D"],
      datasets: [
        {
          backgroundColor: ["rgb(250,0,0)", "rgb(250,0,0)","rgb(250,0,0)","rgb(250,0,0)", "rgb(250,0,0)", "rgb(250,0,0)","rgb(250,0,0)","rgb(250,0,0)"],
          data: [374,135,151,299,460,925,6689,7368]
        }
      ]
    },
    options: {
      legend: { display: false },
      title: {
        display: true,
        text: 'Infektionsverlauf in Dtl. Mittelwert'
      }
    }
});
// CHART 3 - BARCHART VERSTORBEN NACH ALTER
new Chart(document.getElementById("chart3"), {
    type: 'bar',
    data: {
      labels: ["M", "J", "J", "A", "S", "O", "N", "D"],
      datasets: [
        {
          backgroundColor: ["rgb(250,0,0)", "rgb(250,0,0)","rgb(250,0,0)","rgb(250,0,0)", "rgb(250,0,0)", "rgb(250,0,0)","rgb(250,0,0)","rgb(250,0,0)"],
          data: [5980,2160,2422,4783,7352,14803,107030,117880]
        }
      ]
    },
    options: {
      legend: { display: false },
      title: {
        display: true,
        text: 'Infektionsverlauf in Deutschland'
      }
    }
});
// UPCOUNTER
// https://jshakespeare.com/simple-count-up-number-animation-javascript-react/
// How long you want the animation to take, in ms
const animationDuration = 2000;
// Calculate how long each ‘frame’ should last if we want to update the animation 60 times per second
const frameDuration = 1000 / 60;
// Use that to calculate how many frames we need to complete the animation
const totalFrames = Math.round( animationDuration / frameDuration );
// An ease-out function that slows the count as it progresses
const easeOutQuad = t => t * ( 2 - t );

// The animation function, which takes an Element
const animateCountUp = el => {
	let frame = 0;
	const countTo = parseInt( el.innerHTML, 10 );
	// Start the animation running 60 times per second
	const counter = setInterval( () => {
		frame++;
		// Calculate our progress as a value between 0 and 1
		// Pass that value to our easing function to get our
		// progress on a curve
		const progress = easeOutQuad( frame / totalFrames );
		// Use the progress value to calculate the current count
		const currentCount = Math.round( countTo * progress );

		// If the current count has changed, update the element
		if ( parseInt( el.innerHTML, 10 ) !== currentCount ) {
			el.innerHTML = currentCount;
		}

		// If we’ve reached our last frame, stop the animation
		if ( frame === totalFrames ) {
			clearInterval( counter );
		}
	}, frameDuration );
};

// Run the animation on all elements with a class of ‘countup’
window.onload = function() {
	const countupEls = document.querySelectorAll( '#countup' );
	countupEls.forEach( animateCountUp );
};

</script>
</body>
</html>
